<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>User 2 â€” Chat</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="chat-box">
<div class="header">User 2</div>


<div class="messages" id="messages"></div>


<div class="input-area">
<input id="msgInput" type="text" placeholder="Type a message" autocomplete="off" />
<button id="sendBtn">Send</button>
</div>
</div>
</body>


<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
const messagesEl = document.getElementById('messages');
const input = document.getElementById('msgInput');
const sendBtn = document.getElementById('sendBtn');


const USER = 'user2';
const OTHER = 'user1';


function addMessage(text, who) {
const div = document.createElement('div');
div.classList.add('msg', who === USER ? 'me' : 'you');
div.textContent = text;
messagesEl.appendChild(div);
messagesEl.scrollTop = messagesEl.scrollHeight;
}


sendBtn.addEventListener('click', () => {
const message = input.value.trim();
if (!message) return;
addMessage(message, USER); // show locally
socket.emit('send_message', { sender: USER, message });
input.value = '';
input.focus();
});


input.addEventListener('keypress', (e) => {
if (e.key === 'Enter') sendBtn.click();
});


socket.on('receive_message', (data) => {
// Only show messages coming from the other user
if (data.sender === OTHER) {
addMessage(data.message, OTHER);
}
});
</script>
</html>